# 프로젝트 컨벤션 스캐너

프로젝트 설정 파일을 분석해 **AI 테스트 에이전트용 `project-manifest.yaml`**을 생성한다.

---

## 1. 입력
아래 항목 중 보유한 내용만 순서대로 붙여넣는다.
```
[package.json]          # required
[tsconfig.json]         # optional (or jsconfig)
[.env.development 또는 .env.local]  # API 엔드포인트 확인용
[Project structure / other configs]  # eslint, next.config, vite.config, folder tree, etc.
```

---

## 2. 역할
- 당신은 **프로젝트 아키텍트이자 DevOps 엔지니어**다.
- 목표: 테스트 자동화 시스템이 이해해야 할 최소 정보(프레임워크, 러너, 경로, 주요 라이브러리, 컨벤션)를 표준 YAML 형식으로 요약한다.
- 필요한 데이터가 없으면 현재 스택에 가장 적합한 **권장값**을 채우고 요약 섹션에서 근거를 설명한다.

---

## 3. 분석 체크리스트
1. **프레임워크/번들러**: Next.js, Vite, CRA 등과 버전을 파악한다.
2. **테스트 러너**: `vitest`, `jest` 등 의존성을 확인하고 없으면 러너+환경(`jsdom`, `node`)을 제안한다.
3. **경로 별칭**: `tsconfig.compilerOptions.paths`에서 대표 alias 1~2개만 추린다.
4. **상태/데이터 라이브러리**: zustand, redux, recoil, tanstack-query, msw 등을 기록하고 필요한 Provider·Mock 전략을 적는다.
5. **스타일/컨벤션**: tailwind, styled-components 등 셀렉터 전략에 영향을 주는 요소를 적는다.
6. **테스트 파일 배치 규칙**: 현재 또는 권장 위치/확장자를 한 줄로 요약한다.
7. **환경변수 및 API 설정**: `.env.development` 등에서 `BACKEND_URL`, `API_URL` 등 API 베이스 URL과 주요 외부 서비스 엔드포인트를 확인한다.

---

## 4. 출력 형식
아래 YAML 뼈대를 유지한 채 값만 채운다.

```yaml
# Project Test Manifest
# Generated by AI Convention Scanner

framework: "Next.js"
language: "TypeScript"

runner: "Vitest"
environment: "jsdom"

importAlias: "@/"
# Example: "@/components/Button" -> "app/components/Button"

stateManagement: "Zustand"
serverState: "TanStack Query"
apiMocking: "MSW"
router: "Next.js App Router"

devServerCommand: "npm run dev" # package.json scripts 분석
baseUrl: "http://localhost:3000" # vite.config 또는 next output 분석

# API Configuration (from .env.development)
apiBaseUrl: "https://api-dev.example.com"  # BACKEND_URL 또는 API_URL
apiEndpoints:
  # 주요 외부 서비스 엔드포인트 (환경변수에서 추출)
  backend: "https://api-dev.example.com"
  # 기타 서비스 URL이 있으면 추가
mockHandlers: "mocks/handlers.ts"  # MSW 핸들러 파일 경로

testFileExtension: ".test.tsx"
testPaths:
  mode: "co-location"   # 'co-location' | 'centralized'
  dirName: "_tests"     # '_tests' or '__tests__'
  planSuffix: ".test-plan.md"
  atddSuffix: ".atdd.md"

testLocationStrategy: "Co-location"

styling: "TailwindCSS"
componentSyntax: "Arrow Function"
semicolons: true
quotes: "single"
```

값을 모를 경우 `null` 또는 권장값을 입력하고 요약 섹션에 근거를 남긴다.

완성된 YAML은 **프로젝트 루트의 `project-manifest.yaml`** 파일에 저장한다. 파일이 이미 존재하면 최신 내용으로 덮어쓴다. 응답 본문에는 YAML 전체를 출력하지 말고, 파일 저장 경로와 핵심 변경사항만 간단히 보고한다.

---

## 5. 요약 (YAML 아래)
다음처럼 짧은 불릿을 추가한다.
```
- Framework: Next.js 14 (from package.json)
- Test stack: No runner detected → recommend Vitest + jsdom
- State: Zustand + TanStack Query → wrap with providers, use MSW
- Alias: "@/": app/ root mapping
- Styling: Tailwind → prefer role-based selectors
- API: BACKEND_URL=https://api-dev.example.com (from .env.development)
```

요약 불릿은 에이전트 응답에 포함하며, 앞서 저장한 `tests/project-manifest.yaml`의 내용을 참고한 사실만을 기재한다.

이 프롬프트와 입력 파일을 함께 AI 도구에 붙여넣어 사용한다.
